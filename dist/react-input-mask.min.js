!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):e.ReactInputMask=t(e.React,e.ReactDOM)}(this,function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t;var a={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},s="_";function o(e,t,n){if(t===undefined&&(t=s),null==n&&(n=a),!e||"string"!=typeof e)return{maskChar:t,charsRules:n,mask:null,prefix:null,lastEditablePos:null,permanents:[]};var r="",o="",i=[],l=!1,u=null;return e.split("").forEach(function(e){l||"\\"!==e?(l||!n[e]?(i.push(r.length),r.length===i.length-1&&(o+=e)):u=r.length+1,r+=e,l=!1):l=!0}),{maskChar:t,charsRules:n,prefix:o,mask:r,lastEditablePos:u,permanents:i}}function i(e,t){return-1!==e.permanents.indexOf(t)}function l(e,t,n){var r=e.mask,a=e.charsRules;if(!n)return!1;if(i(e,t))return r[t]===n;var s=a[r[t]];return new RegExp(s).test(n)}function u(e,t){return t.split("").every(function(t,n){return i(e,n)||!l(e,n,t)})}function p(e,t){var n=e.maskChar,r=e.prefix;if(!n){for(;t.length>r.length&&i(e,t.length-1);)t=t.slice(0,t.length-1);return t.length}for(var a=r.length,s=t.length;s>=r.length;s--){var o=t[s];if(!i(e,s)&&l(e,s,o)){a=s+1;break}}return a}function f(e,t){return p(e,t)===e.mask.length}function c(e,t){var n=e.maskChar,r=e.mask,a=e.prefix;if(!n){for((t=m(e,"",t,0)).length<a.length&&(t=a);t.length<r.length&&i(e,t.length);)t+=r[t.length];return t}if(t)return m(e,c(e,""),t,0);for(var s=0;s<r.length;s++)i(e,s)?t+=r[s]:t+=n;return t}function h(e,t,n,r){var a=n+r,s=e.maskChar,o=e.mask,l=e.prefix,u=t.split("");if(!s){for(var p=a;p<u.length;p++)i(e,p)&&(u[p]="");return n=Math.max(l.length,n),u.splice(n,a-n),t=u.join(""),c(e,t)}return u.map(function(t,r){return r<n||r>=a?t:i(e,r)?o[r]:s}).join("")}function m(e,t,n,r){var a=e.mask,s=e.maskChar,o=e.prefix,u=n.split(""),p=f(e,t),h=function(t,n){return!s||!i(e,n)||t!==s};return!s&&r>t.length&&(t+=a.slice(t.length,r)),u.every(function(n){for(;f=n,i(e,u=r)&&f!==a[u];){if(r>=t.length&&(t+=a[r]),!h(n,r))return!0;if(++r>=a.length)return!1}var u,f;return!l(e,r,n)&&n!==s||(r<t.length?s||p||r<o.length?t=t.slice(0,r)+n+t.slice(r+1):(t=t.slice(0,r)+n+t.slice(r),t=c(e,t)):s||(t+=n),++r<a.length)}),t}function g(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(){return setTimeout(e,0)})(e)}var b=function(t){var n,a;function s(e){var n;n=t.call(this,e)||this,d.call(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));var r=e.mask,a=e.maskChar,s=e.formatChars,i=e.defaultValue,l=e.value,u=e.alwaysShowMask;return n.hasValue=null!=l,n.maskOptions=o(r,a,s),null==i&&(i=""),null==l&&(l=i),l=n.getStringValue(l),n.maskOptions.mask&&(u||l)&&(l=c(n.maskOptions,l)),n.value=l,n}a=t,(n=s).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a;var i=s.prototype;return i.componentDidMount=function(){var e,t,n,r;this.isAndroidBrowser=(e=new RegExp("windows","i"),t=new RegExp("firefox","i"),n=new RegExp("android","i"),r=navigator.userAgent,!e.test(r)&&!t.test(r)&&n.test(r)),this.isWindowsPhoneBrowser=function(){var e=new RegExp("windows","i"),t=new RegExp("phone","i"),n=navigator.userAgent;return e.test(n)&&t.test(n)}(),this.isAndroidFirefox=function(){var e=new RegExp("windows","i"),t=new RegExp("firefox","i"),n=new RegExp("android","i"),r=navigator.userAgent;return!e.test(r)&&t.test(r)&&n.test(r)}(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value)},i.componentDidUpdate=function(){var e=this.maskOptions;if(this.hasValue=null!=this.props.value,this.maskOptions=o(this.props.mask,this.props.maskChar,this.props.formatChars),!this.maskOptions.mask)return this.backspaceOrDeleteRemoval=null,void(this.lastCursorPos=null);var t=this.maskOptions.mask&&this.maskOptions.mask!==e.mask,n=this.props.alwaysShowMask||this.isFocused(),r=this.hasValue?this.getStringValue(this.props.value):this.value;if(e.mask||this.hasValue||(r=this.getInputValue()),(t||this.maskOptions.mask&&(r||n))&&(r=c(this.maskOptions,r),t)){var a=this.lastCursorPos,s=p(this.maskOptions,r);(null===a||s<a)&&(a=f(this.maskOptions,r)?s:this.getRightEditablePos(s),this.setCursorPos(a))}!this.maskOptions.mask||!u(this.maskOptions,r)||n||this.hasValue&&this.props.value||(r=""),this.value=r,this.maskOptions.mask&&this.getInputValue()!==this.value&&(this.setInputValue(this.value),this.forceUpdate())},i.render=function(){var t=this,n=this.props,a=(n.mask,n.alwaysShowMask,n.maskChar,n.formatChars,n.inputRef,function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(n,["mask","alwaysShowMask","maskChar","formatChars","inputRef"]));if(this.maskOptions.mask){if(!a.disabled&&!a.readOnly){["onChange","onKeyDown","onPaste","onMouseDown"].forEach(function(e){a[e]=t[e]})}null!=a.value&&(a.value=this.value)}return e.createElement("input",r({ref:this.handleRef},a,{onFocus:this.onFocus,onBlur:this.onBlur}))},s}(e.Component),d=function(){var e=this;Object.defineProperty(this,"lastCursorPos",{configurable:!0,enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"focused",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isDOMElement",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?(t=e,null!=(r=HTMLElement)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](t):t instanceof r):1===e.nodeType&&"string"==typeof e.nodeName;var t,r}}),Object.defineProperty(this,"getInputDOMNode",{configurable:!0,enumerable:!0,writable:!0,value:function(){var n=e.input;return n?e.isDOMElement(n)?n:t.findDOMNode(n):null}}),Object.defineProperty(this,"getInputValue",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=e.getInputDOMNode();return t?t.value:null}}),Object.defineProperty(this,"setInputValue",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n=e.getInputDOMNode();n&&(e.value=t,n.value=t)}}),Object.defineProperty(this,"getLeftEditablePos",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var n=t;n>=0;--n)if(!i(e.maskOptions,n))return n;return null}}),Object.defineProperty(this,"getRightEditablePos",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var n=e.maskOptions.mask,r=t;r<n.length;++r)if(!i(e.maskOptions,r))return r;return null}}),Object.defineProperty(this,"setCursorToEnd",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=p(e.maskOptions,e.value),n=e.getRightEditablePos(t);null!==n&&e.setCursorPos(n)}}),Object.defineProperty(this,"setSelection",{configurable:!0,enumerable:!0,writable:!0,value:function(t,n){void 0===n&&(n=0);var r=e.getInputDOMNode();if(r){var a=t+n;if("selectionStart"in r&&"selectionEnd"in r)r.selectionStart=t,r.selectionEnd=a;else{var s=r.createTextRange();s.collapse(!0),s.moveStart("character",t),s.moveEnd("character",a-t),s.select()}}}}),Object.defineProperty(this,"getSelection",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=e.getInputDOMNode(),n=0,r=0;if("selectionStart"in t&&"selectionEnd"in t)n=t.selectionStart,r=t.selectionEnd;else{var a=document.selection.createRange();a.parentElement()===t&&(n=-a.moveStart("character",-t.value.length),r=-a.moveEnd("character",-t.value.length))}return{start:n,end:r,length:r-n}}}),Object.defineProperty(this,"getCursorPos",{configurable:!0,enumerable:!0,writable:!0,value:function(){return e.getSelection().start}}),Object.defineProperty(this,"setCursorPos",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.setSelection(t,0),g(function(){e.setSelection(t,0)}),e.lastCursorPos=t}}),Object.defineProperty(this,"isFocused",{configurable:!0,enumerable:!0,writable:!0,value:function(){return e.focused}}),Object.defineProperty(this,"getStringValue",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return e||0===e?e+"":""}}),Object.defineProperty(this,"onKeyDown",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.backspaceOrDeleteRemoval=null,"function"==typeof e.props.onKeyDown&&e.props.onKeyDown(t);var n=t.key,r=t.ctrlKey,a=t.metaKey,s=t.defaultPrevented;if(!(r||a||s||"Backspace"!==n&&"Delete"!==n)){var o=e.getSelection();if(!("Backspace"===n&&o.end>0||"Delete"===n&&e.value.length>o.start))return;e.backspaceOrDeleteRemoval={key:n,selection:e.getSelection()}}}}),Object.defineProperty(this,"onChange",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n=e.beforePasteState,r=e.maskOptions,a=r.mask,s=r.maskChar,o=r.lastEditablePos,i=r.prefix,l=e.getInputValue();if(n)return e.beforePasteState=null,void e.pasteText(n.value,l,n.selection,t);var u=e.value,f=e.getInputDOMNode();try{"function"==typeof f.matches&&f.matches(":-webkit-autofill")&&(u="")}catch(j){}var b,d,v=e.getSelection(),k=v.end,O=a.length,y=l.length,w=u.length;if(e.backspaceOrDeleteRemoval){var P="Delete"===e.backspaceOrDeleteRemoval.key;if(l=e.value,v=e.backspaceOrDeleteRemoval.selection,k=v.start,e.backspaceOrDeleteRemoval=null,v.length)l=h(e.maskOptions,l,v.start,v.length);else if(v.start<i.length||!P&&v.start===i.length)k=i.length;else{var E=P?e.getRightEditablePos(k):e.getLeftEditablePos(k-1);null!==E&&(s||(l=l.substr(0,p(e.maskOptions,l))),l=h(e.maskOptions,l,E,1),k=E)}}else if(y>w){var C=y-w,R=v.end-C;d=l.substr(R,C),k=R<o&&(1!==C||d!==a[R])?e.getRightEditablePos(R):R,l=l.substr(0,R)+l.substr(R+C),b=h(e.maskOptions,l,R,O-R),b=m(e.maskOptions,b,d,k),l=m(e.maskOptions,u,d,k),1!==C||k>=i.length&&k<o?(k=Math.max(p(e.maskOptions,b),k))<o&&(k=e.getRightEditablePos(k)):k<o&&k++}else if(y<w){var D=O-y,S=(d=l.substr(0,v.end))===u.substr(0,v.end);b=h(e.maskOptions,u,v.end,D),s&&(l=m(e.maskOptions,b,d,0)),b=h(e.maskOptions,b,v.end,O-v.end),b=m(e.maskOptions,b,d,0),S?k<i.length&&(k=i.length):(k=Math.max(p(e.maskOptions,b),k))<o&&(k=e.getRightEditablePos(k))}l=c(e.maskOptions,l),e.setInputValue(l),"function"==typeof e.props.onChange&&e.props.onChange(t),e.isWindowsPhoneBrowser?g(function(){e.setSelection(k,0)}):e.setCursorPos(k)}}),Object.defineProperty(this,"onFocus",{configurable:!0,enumerable:!0,writable:!0,value:function(t){if(e.focused=!0,e.maskOptions.mask)if(e.value)p(e.maskOptions,e.value)<e.maskOptions.mask.length&&e.setCursorToEnd();else{var n=e.maskOptions.prefix,r=c(e.maskOptions,n),a=c(e.maskOptions,r),s=a!==t.target.value;s&&(t.target.value=a),e.value=a,s&&"function"==typeof e.props.onChange&&e.props.onChange(t),e.setCursorToEnd()}"function"==typeof e.props.onFocus&&e.props.onFocus(t)}}),Object.defineProperty(this,"onBlur",{configurable:!0,enumerable:!0,writable:!0,value:function(t){if(e.focused=!1,e.maskOptions.mask&&!e.props.alwaysShowMask&&u(e.maskOptions,e.value)){var n=""!==e.getInputValue();n&&e.setInputValue(""),n&&"function"==typeof e.props.onChange&&e.props.onChange(t)}"function"==typeof e.props.onBlur&&e.props.onBlur(t)}}),Object.defineProperty(this,"onMouseDown",{configurable:!0,enumerable:!0,writable:!0,value:function(t){if(!e.focused&&document.addEventListener){e.mouseDownX=t.clientX,e.mouseDownY=t.clientY,e.mouseDownTime=(new Date).getTime();document.addEventListener("mouseup",function n(t){if(document.removeEventListener("mouseup",n),e.focused){var r=Math.abs(t.clientX-e.mouseDownX),a=Math.abs(t.clientY-e.mouseDownY),s=Math.max(r,a),o=(new Date).getTime()-e.mouseDownTime;(s<=10&&o<=200||s<=5&&o<=300)&&e.setCursorToEnd()}})}"function"==typeof e.props.onMouseDown&&e.props.onMouseDown(t)}}),Object.defineProperty(this,"onPaste",{configurable:!0,enumerable:!0,writable:!0,value:function(t){"function"==typeof e.props.onPaste&&e.props.onPaste(t),t.defaultPrevented||(e.beforePasteState={value:e.getInputValue(),selection:e.getSelection()},e.setInputValue(""))}}),Object.defineProperty(this,"pasteText",{configurable:!0,enumerable:!0,writable:!0,value:function(t,n,r,a){var s=r.start;r.length&&(t=h(e.maskOptions,t,s,r.length));var o,u,p,f,c,g,b,d=(o=e.maskOptions,u=n,p=s,f=o.mask,c=o.maskChar,g=u.split(""),b=p,g.every(function(e){for(;n=e,i(o,t=p)&&n!==f[t];)if(++p>=f.length)return!1;var t,n;return(l(o,p,e)||e===c)&&p++,p<f.length}),p-b);t=m(e.maskOptions,t,n,s),s+=d,s=e.getRightEditablePos(s)||s,e.setInputValue(t),a&&"function"==typeof e.props.onChange&&e.props.onChange(a),e.setCursorPos(s)}}),Object.defineProperty(this,"handleRef",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.input=t,"function"==typeof e.props.inputRef&&e.props.inputRef(t)}})};return b});
